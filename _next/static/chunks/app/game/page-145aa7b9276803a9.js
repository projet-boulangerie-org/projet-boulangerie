(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{2185:(e,t,l)=>{Promise.resolve().then(l.bind(l,9264))},9264:(e,t,l)=>{"use strict";l.d(t,{default:()=>n});var s=l(5155),a=l(2115);let r=[{id:"croissant",emoji:"\uD83E\uDD50",label:"Croissant"},{id:"baguette",emoji:"\uD83E\uDD56",label:"Baguette"},{id:"pain",emoji:"\uD83C\uDF5E",label:"Pain"},{id:"cupcake",emoji:"\uD83E\uDDC1",label:"Cupcake"}];function n(){let[e,t]=(0,a.useState)(!1);(0,a.useEffect)(()=>t(!0),[]);let[l,n]=(0,a.useState)(null),[i,c]=(0,a.useState)([]),[d,o]=(0,a.useState)(0),[m,u]=(0,a.useState)(0),x=(0,a.useRef)(0);(0,a.useEffect)(()=>{x.current=m},[m]);let[h,g]=(0,a.useState)(3),[b,f]=(0,a.useState)(0),[j,v]=(0,a.useState)(""),[N,p]=(0,a.useState)(!1),[w,y]=(0,a.useState)(0),S=(0,a.useRef)(null),M=(0,a.useRef)(null),[k,C]=(0,a.useState)(null),[D,E]=(0,a.useState)(null);(0,a.useEffect)(()=>{{let e=Number(localStorage.getItem("bakeryBest")||0);Number.isNaN(e)||f(e)}},[]);let _=()=>{M.current&&clearInterval(M.current),M.current=null},B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;v(e),setTimeout(()=>v(""),t)},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_(),y(0),S.current=null;let l=()=>{let e=Math.random()<(x.current>=5?.35:.15)?2:1,l=[];for(let t=0;t<e;t++)l.push(r[Math.floor(Math.random()*r.length)].id);let s=Math.max(1e3,3800-160*(t?0:x.current)-(l.length-1)*150),a={id:Date.now(),items:l,timeMs:s};n(a),c([...a.items]),S.current=Date.now()+s,y(s),_(),M.current=setInterval(()=>{var e;let t=(null!=(e=S.current)?e:0)-Date.now();y(Math.max(0,t)),t<=0&&(_(),R("Trop tard, le client s'impatiente... \uD83D\uDE2C"))},100)};e?setTimeout(l,e):l()},R=e=>{_(),u(0),n(e=>e),g(t=>{let l=t-1;return l<=0?(p(!0),B(e,1500),f(e=>{let t=Math.max(e,d);return localStorage.setItem("bakeryBest",String(t)),t})):(B(e),I(350)),Math.max(0,l)})};(0,a.useEffect)(()=>(e&&I(800,!0),()=>_()),[e]);let T=l?Math.max(0,Math.min(100,w/l.timeMs*100)):0,F=(0,a.useMemo)(()=>{let e={};return i.forEach(t=>e[t]=(e[t]||0)+1),e},[i]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("main",{className:"flex-1 flex flex-col items-center text-white px-4",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"w-full max-w-3xl mt-6 mb-4 flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"bg-boulange-gold text-black px-3 py-2 rounded-lg shadow scoreboard",children:["Score : ",(0,s.jsx)("span",{className:"font-bold",children:d})]}),(0,s.jsx)("div",{className:"text-xl select-none",children:Array.from({length:3}).map((e,t)=>(0,s.jsx)("span",{className:t<h?"opacity-100":"opacity-30",children:"❤️"},t))}),(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["S\xe9rie : ",(0,s.jsx)("span",{className:"font-semibold",children:m})," • Meilleur :"," ",(0,s.jsx)("span",{className:"font-semibold",children:b})]})]}),(0,s.jsx)("h2",{className:"text-4xl font-medieval text-boulange-gold mt-2 mb-16",children:"Boulangerie Rush"}),!N&&(0,s.jsx)("div",{className:"w-full max-w-3xl bg-white/5 rounded-2xl p-5 border border-white/10",children:(0,s.jsxs)("div",{className:"rounded-xl bg-black/30 border border-white/10 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-3xl",children:"\uD83E\uDDD1‍\uD83C\uDF73"}),(0,s.jsxs)("div",{className:"text-lg",children:[(0,s.jsx)("div",{className:"font-bold",children:"Commande"}),(0,s.jsx)("div",{className:"text-gray-300 text-sm",children:"Vite vite…"})]})]}),(0,s.jsx)("div",{className:"w-48 h-2 bg-white/10 rounded overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-boulange-gold transition-[width] duration-100 linear",style:{width:"".concat(T,"%")}})})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:r.map(e=>{let t=F[e.id]||0,a=t>0;return(0,s.jsxs)("button",{onClick:()=>(e=>{if(N||!l)return;if(!i.includes(e)){E(e),setTimeout(()=>E(null),250),u(0),x.current=0,g(e=>{let t=e-1;return t<=0?(p(!0),_(),f(e=>{let t=Math.max(e,d);return localStorage.setItem("bakeryBest",String(t)),t}),B("Mauvais produit → plus de vies \uD83D\uDC80",1500)):B("Mauvais produit → -1 vie"),Math.max(0,t)});return}C(e),setTimeout(()=>C(null),250);let t=[...i];t.splice(t.indexOf(e),1),c(t),0===t.length&&(()=>{if(_(),!l)return;let e=10*l.items.length+Math.floor(w/150);o(t=>t+e),u(e=>e+1),B("Commande ok +".concat(e," ✅")),I(350)})()})(e.id),className:["w-full text-left rounded-lg p-3 border border-white/10 transition bg-white/5 hover:bg-white/10",k===e.id?"card-serve":"",D===e.id?"card-wrong":""].join(" "),children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("div",{className:"text-3xl",children:e.emoji})}),(0,s.jsx)("div",{className:"mt-1 text-sm text-gray-200",children:e.label}),(0,s.jsxs)("div",{className:"mt-1 text-xs",children:["Demand\xe9 :"," ",(0,s.jsx)("span",{className:a?"font-semibold text-boulange-gold":"font-semibold",children:t})]})]},e.id)})}),j&&(0,s.jsx)("p",{className:"mt-4 text-center italic text-gray-300 min-h-6",children:j})]})}),N&&(0,s.jsxs)("div",{className:"w-full max-w-3xl bg-white/5 rounded-2xl p-8 border border-white/10 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-400",children:"Partie termin\xe9e"}),(0,s.jsxs)("p",{className:"mt-2 text-gray-300",children:["Score final : ",(0,s.jsx)("span",{className:"font-semibold",children:d})]}),(0,s.jsx)("div",{className:"mt-4 flex items-center justify-center gap-3",children:(0,s.jsx)("button",{onClick:()=>{_(),n(null),c([]),o(0),u(0),x.current=0,g(3),v(""),p(!1),I(600,!0)},className:"bg-boulange-gold text-black font-semibold px-6 py-3 rounded-lg hover:brightness-110",children:"Rejouer"})})]})]}):(0,s.jsx)("div",{className:"min-h-[40vh] flex items-center justify-center text-sm text-gray-400",children:"Chargement du comptoir…"})})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=2185)),_N_E=e.O()}]);